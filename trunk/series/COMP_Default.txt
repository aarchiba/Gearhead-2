% Component List

% STATE OF STORY DESCRIPTION
%  The state of the story is determined by both the "context" attribute held in
%  the story and by certain variables which are determined when it's time to
%  generate a new component. These variables could include:
%  - The existence and nature of the palette entries
%  - The alleigance of the current location with either the PC's faction
%    or the palette enemy faction

% The palette entries are:
%	STAT_XRP_EnemyChar = 1;			{ E: }
%	STAT_XRP_EnemyFac = 2;			{ F: }
%	STAT_XRP_PCFac = 3;			{ P: }
%	STAT_XRP_PlotStateNPC = 4;		{ M: }
%	STAT_XRP_TargetNPC = 5;			{ T: }
%	STAT_XRP_ComponentScene = 6;		{ S: }
%	STAT_XRP_EpisodeScene = 7;		{ L: }
%	STAT_XRP_TargetItem = 8;		{ I: }

Plot
	name <They're Out There!>
	desc <Research will reveal an encounter to investigate.>
	requires <+Tgs (+F--|+Fin|+Fmi) S:++>
	Size 1

	% Element1 is the scene being investigated
	% Element2 is the pilot who saw the thing
	% Element3 is an outdoors scene
	% Element4 is an encounter to place there
	Element1 <Grab 6>
	Element2 <Character HasMecha !Near -7 -ENEMY NeverFail>
	NeverFail2 <Mecha Pilot>
	Element3 <Scene Outdoors !Near -7>
	Element4 <Prefab>
	Place4 <3>

	start <ifNPCDead %2% LoseComp 0 .loss>
	.loss <+T-- +F-->

	sub
		Persona 2
		special <UNLISTED>
		rumor <%name2% got beaten up in %name3%.>
		*greeting <*IHaveInformation GoReveal na>
		GoReveal <NewChat Say 1 StoryNote 2 WinComp %4% .next>
		.next <+Ten +Ffi>
		Msg1 <While traveling through %name3% I was attacked by mecha. I don't know who they are, but I was lucky to escape with my life.>
		Msg2 <%name2% told you that he had been attacked in %name3%.>

		STC MS_CAFE
		SetID 1
	end
	inv
		STC ENCOUNTER-WANDER
		name <%name2%'s Tip>
		EncounterMove 25
	end


Plot
	name <Partner Job Lead>
	desc <Your partner has a message for you.>
	requires <#A +T-- R:++>

	% Element1 is the partner
	% Element2 is the episode town
	% Element3 is the person to ask for a mission
	% Element4 is a scene for the meeting
	Element1 <Grab 4>
	Element2 <Grab 7>
	Element3 <Character !Ally 1 !Near 2>
	Element4 <Scene Building Public !Near 2 !Okay 3>

	% P1 = Have unlocked conversation by visiting destination scene
	start <ifNPCOK %1% else GoEndPlot if= SceneID %2% if= P1 0     P= 1 1  ForceChat %1% SMemo 1>
	GoEndPlot <StoryNote 2 AddRenown -10   LoseComp 0 .loss>
	.loss <+Cfa +Bad>

	Msg1 <%name1% wants to speak with you about something.>
	Msg2 <%name1% died.>

	sub
		Persona 1
		% V1 = First Reputation Counter
		% V2 = Skill to improve
		greeting <if= P1 0 else GoReveal NewChat SayAnything>
		*GoReveal <*LancemateWantsToTalk GoNow GoLater>
		GoNow <NewChat Say %id%01 SMemo %id%03 AddChat %id%01 ifNPCOK %3% else GoE3Died &SetTargetNPC %3% WinComp %4% .next>
		.next <+Tgt +Fmi>
		GoE3Died <WinComp %4% .dead>
		.dead <+Tgs +Fin>
		GoLater <EndChat Say %id%02>
		result%id%01 <NewChat Say %id%04 SMemo %id%05>
		Msg%id%01 <I got a call from %name3%. We've been asked to go to %name4% for a mission.>
		Msg%id%02 <Fine. Ask me about it later, then.>
		Msg%id%03 <You should meet %name3% at %name4% for a mission.>
		Msg%id%04 <Really? Well, maybe we should head over there and see if we can find any information, anyhow.>
		Msg%id%05 <You should search %name4% for information.>
		Prompt%id%01 <Didn't you hear? %name3% is dead.>
		CPrompt%id%01 <ifNPCDead %3% Accept>
	end

Plot
	name <Protect, then Inform>
	desc <The enemy character has sent some mecha to trail this NPC; the PC can get info if he destroys those mecha.>
	requires <#A +Tpt +Fin F:++ S:++>

	% E1 is the scene where this will take place
	% E2 is the NPC to be protected
	% E3 is the outdoors scene where the encounter is
	element1 <Grab 6>
	element2 <Grab 5>
	Place2 <1 (Citizens) pass ally>
	element3 <Scene Outdoors !Near -7>

	% SubPlot1 is the combat encounter
	% SubPlot2 is the revelation of this NPC
	SubPlot1 <*CS_InvisibleEncounter 3>
	SubPlot2 <*CS_Revelation&Friendly 2>

	start <if= PlotStatus %id% else GoCheckFirst ifNPCDead %2% LoseComp 0 .loss>
	.%id1%_%plotid%_GoWin <ifNPCOK %2% else GoJustEnd StoryNote 1 Alert 2 SetPlotStatus %id2%>
	.%id1%_%plotid%_GoLose <DeleteNPC %2%  Goto GoJustEnd>
	GoJustEnd <LoseComp 0 .loss>
	.loss <+T-- +F-->

	Msg1 <You defeated the mecha which were threatening %name2%.>
	Msg2 <You have defeated the mecha which were threatening %name2%.>

	sub
		Persona 2
		greeting <if# PlotStatus 0 else GoGreet if# PlotStatus %id1% else GoRemind NewChat SayAnything>
		*GoGreet <*ProtectCheckIn GoMissionInfo>
		*GoRemind <*MechaMissionReminder %3%>
		GoMissionInfo <NewChat Say %id%01 AddChat %id%01 AddChat %id%02>
		result%id%01 <NewChat Say %id%02 SMemo %id%03 History %id%04 SetPlotStatus %id1%>
		result%id%02 <EndChat Say %id%05 AddChat %id%03>
		result%id%03 <AddHeroic -1 AddReact -10 Goto .%id2%_GoInit>
		Msg%id%01 <You're not here to protect me; you're just trying to find out what I know. You're no better than \FACTION &EnemyFac .>
		Msg%id%02 <You think you can do that? They've sent a mecha that follows me wherever I go. Get rid of it, then we can talk... and if you fail, at least I'll have one less person bothering me.>
		Msg%id%03 <%name2% is being harassed by \FACTION &EnemyFac . If you can destroy the mecha they sent to follow \OPR %2% , \SPR %2% will give you some information.>
		Msg%id%04 <You agreed to defeat the mecha harassing %name2%.>
		Msg%id%05 <Er... You make a persuasive argument.>
		Prompt%id%01 <If I make them go away, will you help me?>
		Prompt%id%02 <Tell me what you know, or you'll find out I'm worse.>
		CPrompt%id%02 <ifIntimidation HardSkillTar StoryDL Accept>
		Prompt%id%03 <[Continue]>

		STC MS_CAFE
		SetID 1
	end

Plot
	name <Drive Off Attacker>
	desc <You walk in just as NPC is about to be attacked.>
	requires <#A +Tpt -Fin T:++ S:++ ~C:POLIC>

	% E1 is the scene where this will take place
	% E2 is the NPC to be rescued
	% E3 is the attacker
	% E4 is the exterior scene where the battle will take place
	element1 <Grab 6>
	element2 <Grab 5>
	Place2 <1 (Citizens) pass ally>
	element3 <Prefab>
	Place3 <1 (Citizens) pass ally>
	element4 <Scene Outdoors !Near -7>

	% SubPlot1 is the combat with E3
	% SubPlot2 is the victory
	SubPlot1 <*CS_NPCAmbushPC 4 3>
	SubPlot2 <*CS_ThanksForRescue 2>

	start <if= PlotStatus %id% else GoCheckFirst ifNPCDead %2% LoseComp 0 .loss>
	GoCheckFirst <if= PlotStatus 0 if= SceneID %1% Monologue %3% 1 Monologue %2% 2 Monologue %3% 3 StoryNote 4 Print 5 FreezeNPC %3% SetPlotStatus %id% SetNPCFaction %3% &EnemyFac>
	.%id1%_%plotid%_GoWin <ifNPCOK %2% else GoJustEnd StoryNote 6 SetPlotStatus %id2%>
	.%id1%_%plotid%_GoLose <DeleteNPC %2%  Goto GoJustEnd>
	GoJustEnd <LoseComp 0 .loss>
	.loss <+T-- +F-->

	Msg1 <Hey %name2%, it's time for you to get what's coming to you.>
	Msg2 <Not so fast- it looks like my reinforcements have just arrived.>
	Msg3 <Hmph. You win this time, %name2%, but I'll be back later...>
	Msg4 <You scared off %name3% before \SPR %3% could attack %name2%.>
	Msg5 <%name3% leaves in a hurry.>
	Msg6 <You were ambushed by %name3% , but defeated \OPR %3% .>

	sub
		Persona 2
		special <UNLISTED>
		rumor%id2% <%name2% wants to thank you for defeating %name3%.>
		greeting <if= PlotStatus %id% else GoChat NewChat Say 1 AddChat 1 AddChat 2 EraseSpecial>
		GoChat <NewChat SayAnything>
		result1 <NewChat Say 2 SMemo 3 AddReact 10 &SetTargetNPC %3% NegateComp 0 .FindE3>
		.FindE3 <+Tht +Far>
		result2 <NewChat Say 4 SMemo 5 PCEnemy %3% SetPlotStatus %id1%>
		Msg1 <\PC , thanks for driving off %name3%. I was pretty worried there for a minute... The problem is, I know that \SPR %3% 's just going to be back later.>
		Msg2 <You plan to go after \OPR %3% ? Good luck.>
		Msg3 <You told %name2% that you'd find %name3% before \SPR %3% can attack \OPR %2% again.>
		Msg4 <You showed up at the right time; that's all you had to do, today. I'm sure %name3% isn't going to forget this, though.>
		Msg5 <After driving off %name3%, %name2% warned you that \SPR %2% might come looking for revenge.>
		Prompt1 <Not if I find \OPR %3% first.>
		Prompt2 <I didn't even really do anything.>

		STC MS_CAFE
		SetID 1
	end
	inv
		NPC Soldier
		job <Hired Thug>
		job_desig <ADVEN>
		chardesc villainous criminal
	end

Plot
	name <Level That House>
	size 1
	desc <The meeting place is attacked by mecha!>
	requires <#A +Tpt T:++ S:++ S:meta>

	% P1 = Initialization Counter

	% E1 is the scene where this will take place
	% E2 is the NPC the PC wants to talk to
	% E3 is the scene outside the meeting area
	% E4 is a public building, if the player chooses to sneak
	element1 <Grab 6>
	element2 <Grab 5>
	Place2 <1 (Citizens) pass ally>
	element3 <Scene Urban !Near -7>
	element4 <Scene Building Public !Near -7 !Okay 2>

	% SubPlot1 contains the ambush battle
	% SubPlot2 contains the victory, if the PC defeats the enemies
	SubPlot1 <*CS_AmbushEncounter 3>
	SubPlot2 <*CS_ThanksForRescue 2>

	start <if= PlotStatus 0 ifNPCDead %2% LoseComp 0 .loss>
	.loss <+T-- +F-->

	% Needed Scripts
	.%id1%_%plotid%_GoWin <ifNPCOK %2% else GoJustEnd Alert 4 StoryNote 2 SetPlotStatus %id2%>
	.%id1%_%plotid%_GoLose <ifNPCOK %2% else GoJustEnd Alert 3 StoryNote 1 DeleteNPC %2% Goto GoJustEnd>
	GoJustEnd <LoseComp 0 .loss>
	.loss <+T-- +Pun>
	Msg1 <You couldn't protect %name2% from a mecha attack.>
	Msg2 <You rescued %name2% from a mecha attack against %name1%.>
	Msg3 <%name1% is blasted by the mecha, killing those trapped inside.>
	Msg4 <You have defended %name2% from the mecha attack.>

	sub
		MetaScene 1
		% L1 = Bombing started
		% L2 = Bomb counter

		BoxMap
		MapWidth 15
		MapHeight 15

		special <AddExit>

		sub
			Team 1

			Team 2
			name <Citizens>
			setally 1
			Passive

			room
			name <Dance Floor>
			desig <EntranceGrid>
		end

		Persona 2
		special <UNLISTED>
		greeting <if= PlotStatus %id1% else GoCheckFirstMeeting EndChat Say 1>
		GoCheckFirstMeeting <if= PlotStatus 0 else GoChat Goto GoGreet>
		GoSetAttack <StoryNote 2 SetPlotStatus %id1%>
		GoChat <NewChat SayAnything>
		*GoGreet <*ProtectCheckIn GoMiisionInfo>
		GoMiisionInfo <NewChat Say 3 AddChat 1 AddChat 2 Goto GoSetAttack>
		result1 <NewChat Say 4>
		result2 <NewChat Say 5 AddChat 3 AddChat 4>
		result3 <EndChat Say 6 AddReact d10 Print 7 XPV 100 Exit %4% SeekGate %3% MoveNPC %2% %4% StoryNote 8 SetPlotStatus %id2%>
		result4 <Goto result1>
		Msg1 <We can't leave here while those mecha are outside...>
		Msg2 <You found %name2% trapped in %name1% by hostile mecha.>
		Msg3_10 <I can't leave this building. There are people outside, with mecha... I'm certain that \PERSONA &EnemyNPC sent them.>
		CMsg3_10 <ifNPCOK &EnemyNPC Accept>
		Msg3_20 <I can't leave this building. There are people outside, with mecha... The second I show my face in public I'll be dead.>
		CMsg3_20 <ifNPCDead &EnemyNPC Accept>
		Msg4 <Good luck.>
		Msg5 <Are you sure? That sounds awfully dangerous...>
		Msg6 <I'll believe in you. Let's go.>
		Msg7 <You sneak %name2% out of the building, and the two of you proceed to %name4%.>
		Msg8 <You sneaked %name2% away to safety.>
		Prompt1 <I can handle the mecha.>
		Prompt2 <Why don't we just sneak past them?>
		CPrompt2 <IfStealth HardSkillTar StoryDL Accept>
		Prompt3 <Trust me. I know what I'm doing.>
		Prompt4 <You could be right. I'll just fight the mecha.>
	end

Plot
	name <Convention Press Conference>
	desc <This convention is about to feature a press conference.>
	requires <#A +Tsh +Fcc S:++>

	% E1 is the scene where the conference will take place
	% E2 is a local scene; natural home to E4
	% E3 is the character doing the talking
	Element1 <Grab 6>
	Element2 <Scene !Near -7 !Okay -3 Public>
	Element3 <NewNPC 2 2>
	Place3 <2>

	% V1 = Initialization Counter
	update <if= V1 0 MoveNPC %3% %1% V= 1 1>
	start <if= PlotStatus 0 if= SceneID %1% Alert 1 SMemo 2 SetPlotStatus %id1%>

	Msg1 <At the convention hall, %name3% appears to be just finishing up a speech.>
	Msg2 <At %name1%, %name3% just gave a speech about something.>

	%% SubPlot1 is the press conference
	SubPlot1 <*CS_PressConference 1 3>

	sub
		STC MS_PRESENTATION
		SetID 1
	end

Plot
	name <Rescue Reward>
	desc <The PC has to speak to a person he just rescued.>
	requires <#A +Tgt +Frt S:++>

	% E1 is the scene where the meeting will take place.
	% E2 is the person who was rescued.
	Element1 <Grab 6>
	Element2 <Grab 5>
	Place2 <1 (Citizens) pass>

	% All the update does is start the rescue reward going...
	update <if= PlotStatus 0 SetPlotStatus %id1%>

	% The subplot contains the reaction/reward.
	SubPlot1 <*CS_ThanksForRescue 2>

	sub
		STC MS_CAFE
		SetID 1
	end

Plot
	name <Locate Target NPC: Perm>
	desc <The PC needs to find an NPC for some reason, but no scene exists.>
	requires <#A +Tpt S:-->
	Size 2

	% E1 is the character being sought.
	% E2 is the character who knows where E1 is.
	% E3 is a scene for the meeting
	Element1 <Grab 5>
	Place1 </>
	Element2 <Character !Near -7 !Okay 1>
	Element3 <Scene !Near -7 Building Public !Okay 1>

	start <if= PlotStatus 0 ifNPCDead %2% NegateComp 0 na>

	sub
		Persona 2
		rumor <%name2% has seen %name1% .>
		*greeting <*LookingForNPC %1% GoSuccess GoFailure>
		GoSuccess <NewChat Say 1 SMemo 2 WinComp %3% .win>
		.win <>
		*GoFailure <*BrushOff&Questioning>
		Msg1 <As far as I know, %name1% is now at %name3%. I hope \SPR %1% isn't in any trouble.>
		Msg2 <%name2% told you that %name1% was at %name3%.>
	end

Plot
	name <Locate Target NPC: Meta>
	desc <The PC needs to find an NPC for some reason, but no scene exists.>
	requires <#A +Tpt S:-->
	Size 2

	% E1 is the character being sought.
	% E2 is the character who knows where E1 is.
	% E3 is a scene for the meeting
	Element1 <Grab 5>
	Place1 </>
	Element2 <Character !Near -7 !Okay 1>
	Element3 <MetaScene !Near -7 *Building NeverFail>

	start <if= PlotStatus 0 ifNPCDead %2% NegateComp 0 na>

	sub
		Persona 2
		rumor <%name2% has seen %name1% .>
		*greeting <*LookingForNPC %1% GoSuccess GoFailure>
		GoSuccess <NewChat Say 1 SMemo 2 WinComp %3% .win>
		.win <>
		*GoFailure <*BrushOff&Questioning>
		Msg1 <As far as I know, %name1% is now at %name3%. I hope \SPR %1% isn't in any trouble.>
		Msg2 <%name2% told you that %name1% was at %name3%.>
	end

Plot
	name <Degenerate Lookfer: Perm>
	desc <The PC needs to find an NPC for some reason. After speaking with an NPC, the search changes to +Tgt.>
	requires <#A +Tgt S:-->
	Size 2

	% E1 is the character being sought.
	% E2 is a public scene in the city, needed for NeverFail
	% E3 is the character who knows where E1 is.
	% E4 is a scene for the meeting
	Element1 <Grab 5>
	Place1 </>
	Element2 <Scene Public !Near -7 !Okay 1>
	Element3 <Character !Near -7 !Okay 1>
	Element4 <Scene !Near -7 Building Public !Okay 1>

	start <if= PlotStatus 0 ifNPCDead %3% NegateComp 0 na>

	sub
		Persona 3
		rumor <%name3% knows where %name1% is.>
		*greeting <*LookingForNPC %1% GoSuccess GoFailure>
		GoSuccess <NewChat Say 1 SMemo 2 WinComp %4% .win>
		.win <>
		*GoFailure <*BrushOff&Questioning>
		Msg1 <The last time I saw \OPR %1% , %name1% was going to %name4%. That's where you should probably check.>
		Msg2 <%name3% told you that %name1% was at %name4%.>
	end

Plot
	name <Degenerate Lookfer: Meta>
	desc <The PC needs to find an NPC for some reason. After speaking with an NPC, the search changes to +Tgt.>
	requires <#A +Tgt S:-->
	Size 2

	% E1 is the character being sought.
	% E2 is a public scene in the city, needed for NeverFail
	% E3 is the character who knows where E1 is.
	% E4 is a scene for the meeting
	Element1 <Grab 5>
	Place1 </>
	Element2 <Scene Public !Near -7 !Okay 1>
	Element3 <Character !Near 2 !Okay 1 NeverFail>
	NeverFail3 <Citizen>
	Element4 <MetaScene !Near -7 *Building NeverFail>

	start <if= PlotStatus 0 ifNPCDead %3% NegateComp 0 na>

	sub
		Persona 3
		rumor <%name3% knows where %name1% is.>
		*greeting <*LookingForNPC %1% GoSuccess GoFailure>
		GoSuccess <NewChat Say 1 SMemo 2 WinComp %4% .win>
		.win <>
		*GoFailure <*BrushOff&Questioning>
		Msg1 <The last time I saw \OPR %1% , %name1% was going to %name4%. That's where you should probably check.>
		Msg2 <%name3% told you that %name1% was at %name4%.>
	end

Plot
	name <Basic Manhunt>
	desc <You're on the trail of a criminal.>
	requires <#A +Tht>

	% E1 is the character being sought.
	Element1 <Grab 5>

	% SubPlot1 is the hideout hider
	%  This subplot should lead on to the conclusion
	SubPlot1 <*CS_Manhunt_Search 1>

	% All the update does is start the manhunt going...
	update <if= PlotStatus 0 SetPlotStatus %id1%>



Plot
	name <Basic Challenge>
	desc <You're going to challenge some guy.>
	requires <#A +Tgt +Fch T:++ S:++ Common>

	% E1 is the scene where the meeting will take place.
	% E2 is the friend being met.
	% E3 is a location for the duel.
	Element1 <Grab 6>
	Element2 <Grab 5>
	Place2 <1 (Citizens) pass>
	Element3 <Scene Environs !Near -7>

	% SubPlot1 is the duel itself
	% SubPlot2 is the path if the PC wins the duel
	% SubPlot3 is the path if the PC loses the duel
	SubPlot1 <*CS_Duel 2 1 3>
	SubPlot2 <*CS_WinDuelVs 2>
	SubPlot3 <*CS_LoseDuelVs 2>

	% As long as we're still at the first phase, the NPC's death will end the plot.
	start <if= PlotStatus 0 ifNPCDead %2% LoseComp 0 .changes>
	.changes <+T-- +F-->

	% V1 = Initialization Counter
	update <if= v1 0 V= 1 1 NPCLevel %2% StoryDL>

	% Branch activators
	.%id1%_%plotid%_GoWin <ifNPCOK %2% else GoE2Died SMemo 1 SetPlotStatus %id2%>
	.%id1%_%plotid%_GoLose <SMemo 2 SetPlotStatus %id3%>
	GoE2Died <SMemo 0 WinComp 0 .changes>

	Msg1 <You bested %name2% in a duel; \SPR %2% is waiting for you at %name1%.>
	Msg2 <You were defeated by %name2% in a duel; \SPR %2% is waiting for you at %name1%.>

	sub
		Persona 2
		greeting <if= PlotStatus 0 else GoChat Goto GoFirstTime>
		*GoChat <*MISC_CHATTER>
		*GoFirstTime <*PCChallengeNPC GoMakeChallenge GoWussOut>
		GoMakeChallenge <StoryNote 1 SetPlotStatus %id1% Goto GoAcceptChallenge>
		*GoAcceptChallenge <*IAcceptYourChallenge %3%>
		*GoWussOut <*GodImBored>
		Msg1 <You challenged %name2% to a duel in %name3%.>

		STC MS_CAFE
		SetID 1
	end

Plot
	name <Lead: Media>
	desc <A media personality will call about something.>
	requires <#A +T-- C:MEDIA>

	% E1 is the scene where this component will take place
	% E2 is the NPC that the PC will speak with
	element1 <Scene Building Public !Near -7>
	element2 <Character !Near 1 MEDIA NeverFail>
	NeverFail2 <Journalist>
	Place2 <1 (Citizens) pass>

	% All this plot does is move the NPC, send an email,
	% and activate the mission subplot
	update <if= PlotStatus 0  EMail 1  SetPlotStatus %id1%>

	%% SubPlot1 is the mission to be offered
	SubPlot1 <*CS_Conversation 2>

	Msg1_1  <%name2%@ \NARRATIVE 7 :// I have a lead for you, \PC . Come meet me at %name1%.>
	Msg1_2  <%name2%@ \NARRATIVE 7 :// Looking for a story? Come see me at %name1%.>
	Msg1_3  <%name2%@ \NARRATIVE 7 :// Hey, let's do lunch at %name1%.>
	Msg1_4  <%name2%@ \NARRATIVE 7 :// I've got an angle to pitch to you. Come see me at %name1%.>
	Msg1_5  <%name2%@ \NARRATIVE 7 :// Have you tried %name1% yet? Meet me there, it's fabulous.>

Plot
	name <Basic Job Offer>
	desc <The PC has to see someone about a job; here it is!>
	requires <#A +Tgt +Fmi S:++ Common>

	% E1 is the scene where this component will take place
	% E2 is the NPC that the PC will speak with
	element1 <Grab 6>
	element2 <Grab 5>
	Place2 <1 (Citizens) pass>

	% All this plot does is move the NPC and activate the mission subplot
	update <if= PlotStatus 0 SetPlotStatus %id1%>

	%% SubPlot1 is the mission to be offered
	SubPlot1 <*CS_GiveMission 2>

	sub
		STC MS_OFFICE
		SetID 1
	end

Plot
	name <Basic Conversation>
	desc <The PC has to talk with someone; here it is!>
	requires <#A +Tgt (+F--|+Fin) S:++ Common>

	% E1 is the scene where this component will take place
	% E2 is the NPC that the PC will speak with
	element1 <Grab 6>
	element2 <Grab 5>
	Place2 <1 (Citizens) pass>

	% All this plot does is move the NPC and activate the conversation subplot
	update <if= PlotStatus 0 SetPlotStatus %id1%>

	%% SubPlot1 is the conversation to be had
	SubPlot1 <*CS_Conversation 2>

	sub
		STC MS_CAFE
		SetID 1
	end

Plot
	name <Basic Friend Contact>
	desc <The PC's friend will call about something.>
	requires <#A +T-->

	% E1 is the scene where this component will take place
	% E2 is the NPC that the PC will speak with
	element1 <Scene Building Public !Near -7>
	element2 <Character !Near -7 !Okay 1 Friend>
	Place2 <1 (Citizens) pass>

	% All this plot does is move the NPC, send an email,
	% and activate the mission subplot
	update <if= PlotStatus 0  EMail 1  SetPlotStatus %id1%>

	%% SubPlot1 is the mission to be offered
	SubPlot1 <*CS_Conversation 2>

	Msg1_1  <%name2%@ \NARRATIVE 7 :// Hey \PC , when you have the time come see me at %name1%>
	Msg1_2  <%name2%@ \NARRATIVE 7 :// I'll be at %name1% for a while. Drop by and we can have a chat.>
	Msg1_3  <%name2%@ \NARRATIVE 7 :// If you're not busy, I'd like to meet with you at %name1%.>
	Msg1_4  <%name2%@ \NARRATIVE 7 :// There are things we need to discuss. Meet me at %name1%.>
	Msg1_5  <%name2%@ \NARRATIVE 7 :// \PC , come meet me at %name1%. I'll be waiting there.>


Plot
	name <Basic Friendly Mission>
	desc <The PC will be offered a job by a faction member.>
	requires <#A +T-- P:++ -P:ENEMY>

	% E1 is the scene where this component will take place
	% E2 is the NPC that the PC will speak with
	element1 <Scene Building Public !Okay -3 !Near -7>
	element2 <Character !Near -7 !Comrade -3>
	Place2 <1 (Citizens) pass>

	% All this plot does is move the NPC, send an email,
	% and activate the mission subplot
	update <if= PlotStatus 0  EMail 1  SetPlotStatus %id1%>

	%% SubPlot1 is the mission to be offered
	SubPlot1 <*CS_GiveMission 2>

	Msg1_1  <%name2%@ \NARRATIVE 7 // I've got a job for you. Report to %name1% as soon as possible.>
	Msg1_2  <%name2%@ \NARRATIVE 7 :// You have some work from \NARRATIVE 3 . I'll be waiting for you here at %name1%.>
	Msg1_3  <%name2%@ \NARRATIVE 7 :// I have a mission for you from \NARRATIVE 3 . Call me, or come to %name1%.>
	Msg1_4  <%name2%@ \NARRATIVE 7 :// \PC - I've got some work for you to do. Come to %name1% for the briefing.>
	Msg1_5  <%name2%@ \NARRATIVE 7 :// Your presence is required in %name1%.>


